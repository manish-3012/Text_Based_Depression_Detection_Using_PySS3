How do I cope with guilt and suicidal thoughts over a really bad break up?I had a very complicated relationship story, but I will try to summarize. And a break up that goes horribly wrong for me.

Met a girl last year, we hit it off well but I went with friendship after some dates. We stayed as friends for 6 months, then went in a casual relationship (one sided, I later found out) because I had visa problems and unemployed in a country I was barely surviving at. I am studying atm. She has work but I didn't want to bring him into my troubles. 3-4 months goes very smoothly, she confesses her feelings and I don't because of these reasons. But I also have feelings for her which I told her. We tried to stay friends while I was awaiting my visa problem to be over, the visa arrived too late and by that we became very vulnerable, and somewhat bitter towards each other. Had one last meeting before that new visa came where she told me she'd meet me in my country and celebrate the new visa if it comes. She went for a kiss but I stopped because I thought I was leaving, no need to complicate feelings more.

New visa comes, I ask her about celebrating it, she ignores that 3 times and then asks for space. I became very confused, and basically was heartbroken that I wasn't able to confess my whole feelings to her before. Basically couldn't respect that space, overwhelmed by emotions, telling how much I love her etc. She then blocks me on all online platforms.  I became very guilt-ridden to the point where I was contemplating suicide. In order to cope with my feelings, I wrote a heartfelt letter to her where I include some poems and a song I recorded and wanted to send it to her. Since I couldn't do that online, I tried contacting her at an orchestra she plays, couldn't find her but when I asked where she is, the players suspected me of harassing her (which seems like it now). Feeling bad, before she finds out by herself, I made it WORSE by going to a train station close by her workplace and waiting her there, then delivering the letter in person.

In the end, she took it very badly, called me a stalker and called even staying friends off. I am very lonely in this country I am trying to find work, finish studies, build something at. How can I cope with these feelings?

Thanks.